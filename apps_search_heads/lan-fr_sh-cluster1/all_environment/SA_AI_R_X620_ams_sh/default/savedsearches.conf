####################
### Saved Search ###
####################
##### AMS FILE TRANSFER DASHBOARDS ###########

##MAIL ALERT FOR "ERROR" STATUS FOR FILE TRANSFERS##
[AMS_US04_x620_ams_get_file_transport_status_by_mail]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.message.alert = ALERT ! The below files have not been received by AMS
action.email.sendresults = 1
action.email.subject.alert = AMS [Natco] File transfer issue
action.email.to = dhirendra.singh@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 */12 * * *
dispatch.earliest_time = -7d@d
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`x620_ams_get_status` \
| eval File=toString(File).".csv" \
| rename natco as Server status as Status File_Status as "Natco Status" source as "File Type" filePath as "File Location" diff as "Actual Diff" \
| where Status="Error" \
| table Day Server Status Message "File Type" File

##MAIL ALERT FOR DAILY STATUS FOR FILE TRANSFERS##

[AMS_US07_x620_ams_get_daily_file_transport_status_by_mail]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.message.alert = Daily Report : $result.Day$ \
Hello All, \
Here you have the result of the monitoring for today.
action.email.sendresults = 1
action.email.subject.alert = AMS [Natco] Daily report
action.email.to = dhirendra.singh@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 */12 * * *
dispatch.earliest_time = -7d@d
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`x620_ams_get_status` \
| eval File=toString(File).".csv" \
| rename natco as Server status as Status File_Status as "Natco Status" source as "File Type" filePath as "File Location" diff as "Actual Diff" \
| table Day Server Status Message "File Type" File

########################################
##### AMS INFRASTRUCTURE DASHBOARDS ####
########################################

##MAIL ALERT FOR SYSTEM COMPONENT BECOMES DOWN##

[AMS_US16_1_x620_ams_get_IP_status_by_mail]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.message.alert = SYSTEM ALERT ! The [System Component] is down on $result.Host$ server.
action.email.sendresults = 1
action.email.subject.alert = AMS [Natco] System component down
action.email.to = dhirendra.singh@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
schedule_window = auto
alert.track = 0
counttype = number of events
cron_schedule = 0 */12 * * *
dispatch.earliest_time = -2m@m
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_ips_server` \
| where Status="DOWN" \
| table Time Host Status IP Natco

##MAIL ALERT FOR ERROR VALIDATING OUTBOUND CHANNEL##

[AMS_US27_x620_ams_get_call_tree_by_mail]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.message.alert = CALL TREE ALERT ! The message $result.Services$ has been raised in Call Tree log file.
action.email.sendresults = 1
action.email.subject.alert = AMS [Natco] : Call Tree outbound Channel issue
action.email.to = dhirendra.singh@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 */12 * * *
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`calltree_status`


##MAIL ALERT TO CHECK IF SERVICE IS DOWN##

[AMS_US18_x620_ams_get_services_by_mail]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.message.alert = SYSTEM ALERT ! The $result.DisplayName$ is down on $result.Host$ server.
action.email.sendresults = 1
action.email.subject.alert = AMS [Natco] : Service down
action.email.to = dhirendra.singh@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 */12 * * *
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`service_status` Host \
| table _time Host natco DisplayName Status "Status Message" \
| rename _time as Time natco as Server DisplayName as Service


##MAIL ALERT TO CHECK IF IS UNAVAILABLE##

[AMS_US20_x620_ams_get_URLs_by_mail]
action.email = 1
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.message.alert = URL ALERT ! The below details is describe for the LINK(s) and returns this results:
action.email.sendresults = 1
action.email.subject.alert = AMS [Natco] URL unavailable.
action.email.to = dhirendra.singh@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 */12 * * *
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`website_status` \
|search Status!=200


[AMS_US31_x620_ams_get_dateendtime_errors_by_mail]
action.email = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.message.alert = RTW Date issue ! Inconsistency dates on Absence [ID] and RTW [ID].
action.email.sendresults = 1
action.email.subject.alert = AMS: RTW Dates inconsistency [DateEndTime Errors]
action.email.to = pierre.laurens@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 9 * * *
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_get_dateendtime_errors_by_mail`

[AMS_US31_x620_ams_get_dateendtime_exceed_by_mail]
action.email = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.message.alert = RTW Date issue ! Inconsistency dates on Absence [ID] and RTW [ID].
action.email.sendresults = 1
action.email.subject.alert = AMS: RTW Dates inconsistency [DateEndTime Exceed]
action.email.to = pierre.laurens@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 9 * * *
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_get_dateendtime_exceed_by_mail`

[AMS_US31_x620_ams_get_dateinitialreturntowork_errors_by_mail]
action.email = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.message.alert = RTW Date issue ! Inconsistency dates on Absence [ID] and RTW [ID].
action.email.sendresults = 1
action.email.subject.alert = AMS: RTW Dates inconsistency [DateInitialReturnToWork Errors]
action.email.to = pierre.laurens@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 9 * * *
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_get_dateinitialreturntowork_errors_by_mail`


[AMS_US31_x620_ams_get_dateinitialreturntowork_exceed_by_mail]
action.email = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.message.alert = RTW Date issue ! Inconsistency dates on Absence [ID] and RTW [ID].
action.email.sendresults = 1
action.email.subject.alert = AMS: RTW Dates inconsistency [DateInitialReturnToWork Exceed]
action.email.to = pierre.laurens@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 9 * * *
dispatch.earliest_time = -24h@h
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_get_dateinitialreturntowork_exceed_by_mail`

[AMS_US59_x620_ams_get_delegation_consistency_alerting_FR]
action.email = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.message.alert = DELEGATION ALERT ! The delegation [ID] status is Pending while the start date [StartDate] of the delegation request is exceed.
action.email.sendresults = 1
action.email.subject.alert = AMS [FR] : Delegation consistency issue
action.email.to = pierre.laurens@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 9 * * *
dispatch.earliest_time = -5y@y
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_delegation_alerting_FR`

[AMS_US59_x620_ams_get_delegation_consistency_alerting_ES]
action.email = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.message.alert = DELEGATION ALERT ! The delegation [ID] status is Pending while the start date [StartDate] of the delegation request is exceed.
action.email.sendresults = 1
action.email.subject.alert = AMS [ES] : Delegation consistency issue
action.email.to = pierre.laurens@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 9 * * *
dispatch.earliest_time = -5y@y
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_delegation_alerting_ES`

[AMS_US59_x620_ams_get_delegation_consistency_alerting_UK]
action.email = 1
action.email.footer.text = Best regards,\
AMS Team
action.email.include.results_link = 0
action.email.include.view_link = 0
action.email.inline = 1
action.email.message.alert = DELEGATION ALERT ! The delegation [ID] status is Pending while the start date [StartDate] of the delegation request is exceed.
action.email.sendresults = 1
action.email.subject.alert = AMS [UK] : Delegation consistency issue
action.email.to = pierre.laurens@soprasteria.com
action.email.useNSSubject = 1
alert.suppress = 0
alert.track = 0
schedule_window = auto
counttype = number of events
cron_schedule = 0 9 * * *
dispatch.earliest_time = -5y@y
dispatch.latest_time = now
display.general.type = statistics
display.page.search.mode = fast
display.page.search.tab = statistics
enableSched = 1
quantity = 0
relation = greater than
request.ui_dispatch_app = SA_AI_R_X620_ams_sh
request.ui_dispatch_view = search
search = |`ams_delegation_alerting_UK`